{% extends 'base.html' %}

{% block content %}
  <h2>Search Results</h2>
  
  <form method="get" action="{% url 'post_search' %}" class="mb-4">
    <div class="input-group">
      <input type="text" name="q" class="form-control" 
             value="{{ request.GET.q }}" placeholder="Search posts...">
      <button type="submit" class="btn btn-primary">Search</button>
    </div>
  </form>

  {% if search_results %}
    <div class="list-group">
      {% for post in search_results %}
        <a href="{{ post.get_absolute_url }}" class="list-group-item list-group-item-action">
          <h5>{{ post.title }}</h5>
          <p class="mb-1">{{ post.content|truncatewords:30 }}</p>
          <small class="text-muted">
            Tags: {% for tag in post.tags.all %}<span class="badge bg-secondary">{{ tag }}</span> {% endfor %}
          </small>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p>No results found for "{{ request.GET.q }}"</p>
  {% endif %}
{% endblock %}